{"name":"Lamp","tagline":"Basic lamp machine with Berkshelf Chef and Vagrant support","body":"lamp\r\n====\r\nBasic lamp machine with Berkshelf Chef and Vagrant support\r\n* Master: [![Build Status](https://api.travis-ci.org/sergiuionescu/lamp.svg?branch=master)](http://travis-ci.org/sergiuionescu/lamp)\r\n* Dev: [![Build Status](https://api.travis-ci.org/sergiuionescu/lamp.svg?branch=dev)](http://travis-ci.org/sergiuionescu/lamp)\r\n\r\n\r\nInstalls and configures the following services:\r\n- apache(mod_proxy)\r\n- php-fpm\r\n- mysql\r\n\r\nAdditional services/tools:\r\n- vim\r\n- sendmail\r\n- git client\r\n- composer\r\n\r\nAdds optional xdebug and nfs share capabilities.\r\nPhp7 support via ppa:ondrej/php.\r\n\r\n\r\nRequirements(prod)\r\n------------------\r\n* chef-solo: https://downloads.chef.io/chef-client/\r\n* berkshelf: http://berkshelf.com/\r\n\r\nRequirements(dev)\r\n-----------------\r\n* vagrant: https://www.vagrantup.com/downloads.html\r\n* chef dk: https://downloads.getchef.com/chef-dk/\r\n* virtualbox: https://www.virtualbox.org/wiki/Downloads\r\n\r\nTesting the dev environment\r\n---------------------------\r\n- Clone the repository\r\n- Go to the project root\r\n- Run kitchen converge\r\n\r\nRecipes\r\n-------\r\n- default - installs basic services\r\n- nfs - installs nfs server and exposes a network share to '/var/www'\r\n- xdebug - installs the php debugger\r\n- phpinfo - recipe that sets up a test web application under '/var/www/phpinfo' - accessing the machine ip will show the phpinfo values\r\n\r\nConfiguration\r\n-------------\r\nSample roles\r\n\r\nLamp(production):\r\n- install basic lamp services\r\n```json\r\n{\r\n    \"name\": \"lamp\",\r\n    \"chef_type\": \"role\",\r\n    \"json_class\": \"Chef::Role\",\r\n    \"description\": \"Basic lamp configuration.\",\r\n    \"run_list\": [\r\n        \"recipe[lamp]\"\r\n    ]\r\n}\r\n```\r\n\r\nLamp + nsf share + xdebug(dev):\r\n- installs basic lamp services\r\n- creates a nfs share of '/var/www'\r\n- installs xdebug - you need to manually set remote_enable=1\r\n```json\r\n{\r\n    \"name\": \"lamp\",\r\n    \"chef_type\": \"role\",\r\n    \"json_class\": \"Chef::Role\",\r\n    \"description\": \"Basic lamp configuration.\",\r\n    \"run_list\": [\r\n        \"recipe[lamp]\",\r\n        \"recipe[lamp::nfs]\",\r\n        \"recipe[lamp::xdebug]\",\r\n        \"recipe[lamp::phpinfo]\"\r\n    ],\r\n    \"default_attributes\": {\r\n        \"lamp\": {\r\n            \"share\": {\r\n                \"user\": \"vagrant\",\r\n                \"group\": \"vagrant\"\r\n            },\r\n            \"xdebug\": {\r\n                \"directives\": {\r\n                    \"remote_host\": \"10.0.2.2\",\r\n                    \"remote_enable\": 0,\r\n                    \"remote_autostart\": 1\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nSample role with php7 support.\r\n\r\nPhp 7 is supported via ppa. The are a number of overwrite attributes that need to be set as long with a path for the php cookbook to disable pear and pecl update.\r\n```json\r\n{\r\n    \"name\": \"lamp\",\r\n    \"chef_type\": \"role\",\r\n    \"json_class\": \"Chef::Role\",\r\n    \"description\": \"Basic lamp configuration.\",\r\n    \"run_list\": [\r\n        \"recipe[lamp]\",\r\n        \"recipe[lamp::nfs]\"\r\n    ],\r\n    \"override_attributes\": {\r\n        \"php\": {\r\n            \"version\": \"7.0\",\r\n            \"conf_dir\": \"/etc/php/7.0/cli\",\r\n            \"packages\": [\r\n                \"php7.0-cgi\",\r\n                \"php7.0\",\r\n                \"php7.0-dev\",\r\n                \"php7.0-cli\",\r\n                \"php7.0-json\",\r\n                \"php7.0-curl\",\r\n                \"php-pear\"\r\n            ],\r\n            \"mysql\": {\r\n                \"package\": \"php7.0-mysql\"\r\n            },\r\n            \"fpm_package\": \"php7.0-fpm\",\r\n            \"fpm_pooldir\": \"/etc/php/7.0/fpm/pool.d\",\r\n            \"fpm_service\": \"php7.0-fpm\",\r\n            \"fpm_default_conf\": \"/etc/php/7.0/fpm/pool.d/www.conf\"\r\n        }\r\n    }\r\n}\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}